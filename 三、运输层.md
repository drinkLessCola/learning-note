# 三、运输层

运输层的关键功能：

将 **网络层** 的在 **两个端系统** 之间的交付服务 扩展到 运行在两个**不同端系统上的应用层进程**之间的交付服务。

网络中的基础性的重要问题：

1. 两个实体怎样才能在一种会丢失或损坏数据的媒体上可靠的通信。
2. 控制运输层实体的传输速率以避免网络中的拥塞，或从拥塞中恢复过来。

## 1.概述和运输层服务

运输层协议为运行在不同主机上的应用进程之间提供了**逻辑通信**功能。

运输层协议是在**端系统**中而不是在路由器中实现的。

- 在发送端，接收应用层的报文并转为报文段。移交到网络边缘。
- 网络路由器仅<u>作用于该数据报的网络层字段</u>，不检查封装在该数据报的运输层报文段字段。
- 在接收端，网络层从数据报中提取运输层报文段，并将该报文段上交给运输层。

 **报文段**：运输层将从 发送应用程序进程 接收到的报文转换为的运输层分组。

- 将应用报文划分为较小的块。
- 为每块加上一个运输层首部。

### 1.1 运输层和网络层的关系

**网络层** 提供了<u>主机</u>之间的逻辑通信。

**运输层** 提供了运行在<u>不同主机的进程</u>之间的逻辑通信。

计算机网络中可以安排多种 运输层协议，每种协议为应用程序提供不同的服务模型。

- **`UDP` 用户数据报协议**：提供不可靠、无连接服务。
- **`TCP` 传输控制协议**：提供可靠的，面向连接的服务。
- 应用程序在生成套接字时指定选择其中一个。

**运输协议提供的服务常常受制于网络层协议的服务模型**。

- 如果网络层协议无法为主机之间发送的运输层报文段提供时延或带宽保证的话，运输层协议也无法为进程之间发送的应用程序报文提供时延或带宽保证。

即使底层网络协议不能在网络层提供相应的服务，**运输层协议也能提供某些服务。**

- 即使底层网络协议是**不可靠**的，会使分组丢失、篡改和冗余。运输协议也能为应用程序提供**可靠**的数据传输服务。
- 即使网络层不能保证运输层报文段的**机密性**，运输协议也能使用**加密**来确保应用程序报文不被入侵者读取。



