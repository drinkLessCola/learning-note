## 闭包

引用其他函数作用域中变量的函数。

- 通常在嵌套函数中实现
- 是由于内部函数的作用域链上保存了对外部函数变量对象的引用。

### 函数定义

内部属性[[Scope]] 预装载当前上下文的作用域链

- 用于之后函数调用时初始化作用域链。

**作用域链** 实际上是一个包含指针的列表，每个指针分别指向一个变量对象。

函数调用时查找变量是顺着作用域链进行查找的。

### 执行上下文

执行上下文中都会有三个重要的属性：this、变量对象（VO）、作用域链（[[scope]])



### 函数调用

- 为函数调用创建一个执行上下文
- 复制[[Scope]]来创建一个作用域链
- 使用 arguments 和命名参数创建函数的活动对象
- 将活动对象推向作用域链的前端

### 闭包会导致外部函数的变量对象无法销毁

由于内部函数的作用域链上保留着对外部函数的变量对象的引用，因此，被引用的活动对象需要等到内部函数被销毁时才能被销毁。

